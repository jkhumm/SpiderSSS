# ZH

## Search

- 001

https://www.zhihu.com/api/v4/search_v3?t=general&q=%E6%B1%89%E5%BE%97&correction=1&offset=0&limit=20&lc_idx=0&show_all_topics=0

```json
{
    "referer": "https://www.zhihu.com/search?type=content&q=%E6%B1%89%E5%BE%97",
    "x-zse-83": "3_2.0",
    "x-zse-86": "1.0_aMYB67Ly2L2YgBOy0CNBgve867YfQX28zwS82ir0FhxY",
}
```



- 002

https://www.zhihu.com/api/v4/search_v3?t=general&q=%E6%B1%89%E5%BE%97&correction=1&offset=20&limit=20&lc_idx=22&show_all_topics=0&search_hash_id=1b81aaf989d7573c3d128fa4bd18781f&vertical_info=0%2C1%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C1

```json
{
    "referer": "https://www.zhihu.com/search?type=content&q=%E6%B1%89%E5%BE%97",
    "x-zse-83": "3_2.0",
    "x-zse-86": "1.0_a_F0Hcu0QTxpr7F0sRF0S4eqFBFYcTN0K7YBoi986_SX",
    "x-zst-81": "3_2.0ae3TnRUTEvOOUCNMTQnTSHUZo02p-HNMZBO8YD702Xtuo7YyB6P0Eiuy-LS9-hp1DufI-we8gGHPgJO1xuPZ0GxCTJHR7820XM20cLRGDJXfgGCBxupMuD_Ie8FL7AtqM6O1VDQyQ6nxrRPCHukMoCXBEgOsiRP0XL2ZUBXmDDV9qhnyTXFMnXcTF_ntRueThXgBZupYbixm6_YYRJXmObL0HwpmtwCqiCgCWrXyjwLx0B3CbULCJU90aBCPv0pmjhVODbNBfDwLfDO8f9FCzqoffuwVjre1KqLf1JHBhhNOrqxYzCSVxbHC0gV_WCH0s_V_ODC0PDL8HGNYf7FK3hLmb8gmYgSC-q38PUUB6JO1HCL0vqfz99xGSXpO1Bx9Qge8HDcYg9CfXucV0UF0DCVMAwcpoGSGzDHBjBxOYhpVfwe9mDwLavxq0gxxsG2qJGVZubwOqGF8tbSmTDHOJgXYeeNOZGoY10XBQQOC"
}
```



- 003

https://www.zhihu.com/api/v4/search_v3?t=general&q=%E6%B1%89%E5%BE%97&correction=1&offset=40&limit=20&lc_idx=42&show_all_topics=0&search_hash_id=1b81aaf989d7573c3d128fa4bd18781f&vertical_info=0%2C1%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C1

```json
{
    "referer": "https://www.zhihu.com/search?type=content&q=%E6%B1%89%E5%BE%97",
    "x-zse-83": "3_2.0",
    "x-zse-86": "1.0_aLY8SAXBSTSXQ8Oyy9ty24UBnBFYNUF8fTtqggXBUu2f",
    "x-zst-81": "3_2.0ae3TnRUTEvOOUCNMTQnTSHUZo02p-HNMZBO8YD702Xtuo7YyB6P0Eiuy-LS9-hp1DufI-we8gGHPgJO1xuPZ0GxCTJHR7820XM20cLRGDJXfgGCBxupMuD_Ie8FL7AtqM6O1VDQyQ6nxrRPCHukMoCXBEgOsiRP0XL2ZUBXmDDV9qhnyTXFMnXcTF_ntRueThXgBZupYbixm6_YYRJXmObL0HwpmtwCqiCgCWrXyjwLx0B3CbULCJU90aBCPv0pmjhVODbNBfDwLfDO8f9FCzqoffuwVjre1KqLf1JHBhhNOrqxYzCSVxbHC0gV_WCH0s_V_ODC0PDL8HGNYf7FK3hLmb8gmYgSC-q38PUUB6JO1HCL0vqfz99xGSXpO1Bx9Qge8HDcYg9CfXucV0UF0DCVMAwcpoGSGzDHBjBxOYhpVfwe9mDwLavxq0gxxsG2qJGVZubwOqGF8tbSmTDHOJgXYeeNOZGoY10XBQQOC"
}
```

- 004

https://www.zhihu.com/api/v4/search_v3?t=general&q=%E6%B1%89%E5%BE%97&correction=1&offset=60&limit=20&lc_idx=62&show_all_topics=0&search_hash_id=1b81aaf989d7573c3d128fa4bd18781f&vertical_info=0%2C1%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C1

```json
{
    "referer": "https://www.zhihu.com/search?type=content&q=%E6%B1%89%E5%BE%97",
    "x-zse-83": "3_2.0",
    "x-zse-86": "1.0_aHY820r8eTSfUhY0zCYqUrHqk82xnqxBm7tBHhr82Xxp",
    "x-zst-81": "3_2.0ae3TnRUTEvOOUCNMTQnTSHUZo02p-HNMZBO8YD702Xtuo7YyB6P0Eiuy-LS9-hp1DufI-we8gGHPgJO1xuPZ0GxCTJHR7820XM20cLRGDJXfgGCBxupMuD_Ie8FL7AtqM6O1VDQyQ6nxrRPCHukMoCXBEgOsiRP0XL2ZUBXmDDV9qhnyTXFMnXcTF_ntRueThXgBZupYbixm6_YYRJXmObL0HwpmtwCqiCgCWrXyjwLx0B3CbULCJU90aBCPv0pmjhVODbNBfDwLfDO8f9FCzqoffuwVjre1KqLf1JHBhhNOrqxYzCSVxbHC0gV_WCH0s_V_ODC0PDL8HGNYf7FK3hLmb8gmYgSC-q38PUUB6JO1HCL0vqfz99xGSXpO1Bx9Qge8HDcYg9CfXucV0UF0DCVMAwcpoGSGzDHBjBxOYhpVfwe9mDwLavxq0gxxsG2qJGVZubwOqGF8tbSmTDHOJgXYeeNOZGoY10XBQQOC"
}
```





url: offset、lc_idx递增；第一页和后面不同，后面需要search_hash_id和vertical_info两个参数，给第一个url加上两个参数而不改变其他的无法请求（可能**x-zse-86**根据请求参数计算得到）；

header：

- referer：不变；
- x-zse-83：不变，标识请求设备：{iOS: "5_2.0", Android: "4_2.0", web: "3_2.0"}；
- **x-zse-86：每次改变，应该是通过某种方式计算出的值（找js代码）；**
- x-zst-81：不变（也是通过某种方式计算得出）；



**x-zse-86：**

```
https://static.zhihu.com/heifetz/main.app.270520efd763337765db.js
```



## Answer

https://www.zhihu.com/api/v4/questions/23077814/answers?include=data%5B%2A%5D.is_normal%2Cadmin_closed_comment%2Creward_info%2Cis_collapsed%2Cannotation_action%2Cannotation_detail%2Ccollapse_reason%2Cis_sticky%2Ccollapsed_by%2Csuggest_edit%2Ccomment_count%2Ccan_comment%2Ccontent%2Ceditable_content%2Cvoteup_count%2Creshipment_settings%2Ccomment_permission%2Ccreated_time%2Cupdated_time%2Creview_info%2Crelevant_info%2Cquestion%2Cexcerpt%2Crelationship.is_authorized%2Cis_author%2Cvoting%2Cis_thanked%2Cis_nothelp%2Cis_labeled%2Cis_recognized%2Cpaid_info%2Cpaid_info_content%3Bdata%5B%2A%5D.mark_infos%5B%2A%5D.url%3Bdata%5B%2A%5D.author.follower_count%2Cbadge%5B%2A%5D.topics&limit=5&offset=5&platform=desktop&sort_by=default



https://www.zhihu.com/api/v4/questions/23077814/answers?

include=data%5B%2A%5D.is_normal%2Cadmin_closed_comment%2Creward_info%2Cis_collapsed%2Cannotation_action%2Cannotation_detail%2Ccollapse_reason%2Cis_sticky%2Ccollapsed_by%2Csuggest_edit%2Ccomment_count%2Ccan_comment%2Ccontent%2Ceditable_content%2Cvoteup_count%2Creshipment_settings%2Ccomment_permission%2Ccreated_time%2Cupdated_time%2Creview_info%2Crelevant_info%2Cquestion%2Cexcerpt%2Crelationship.is_authorized%2Cis_author%2Cvoting%2Cis_thanked%2Cis_nothelp%2Cis_labeled%2Cis_recognized%2Cpaid_info%2Cpaid_info_content%3Bdata%5B%2A%5D.mark_infos%5B%2A%5D.url%3Bdata%5B%2A%5D.author.follower_count%2Cbadge%5B%2A%5D.topics

&limit=5

&offset=5

&platform=desktop

&sort_by=default



直接请求：

- limit：大于20会报“不合法的 limit”错误；
- offset：请求数据起始便宜量；
- platform：可以省略；
- sort_by：【default、time】两种选择；

